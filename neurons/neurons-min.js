let brain,branches,branchesInterval,doit,r=document.querySelector(":root"),neurons=[],tempX=0,tempY=0,influence=-1,pointerDown=!1,useASinH=!1,width=25,useDark=!1,classes=["a","c","d","b","e"],count=0,previousNeuron=null,currentNeuron=null,allLines=[];function addNeurons(){brain=document.getElementsByTagName("brain")[0];for(let t=0;t<Math.round(window.innerHeight/width);t++)for(let n=0;n<Math.round(window.innerWidth/width);n++){var e=document.createElement("neuron");e.id="neuron"+count++;let o=getRandomInt(0,classes.length);e.className=classes[o],e.originalClassName=e.className,e.onclick=changeNeuron;let a=n*width,r=t*width;e.storedStyleTransform="translate("+a+"px, "+r+"px)",neurons.push(e)}applyNeurons()}function applyNeurons(){brain=document.getElementsByTagName("brain")[0];for(let e=0;e<neurons.length;e++){const t=neurons[e];t.style.transform=t.storedStyleTransform,brain.appendChild(t)}neurons=[]}function resetNeurons(){document.location.href=document.location.href}function addLine(e,t){var n=document.createElement("div");const o=window.getComputedStyle(e).transform.match(/matrix.*\((.+)\)/)[1].split(", "),a=window.getComputedStyle(t).transform.match(/matrix.*\((.+)\)/)[1].split(", "),r=o[4]-a[4],s=o[5]-a[5],u=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),l=Number(a[4]-o[4]),c=Number(a[5]-o[5]),i=180*Math.atan2(c,l)/Math.PI-90;n.className=e.id+" "+t.id,n.style.left=o[4]+"px",n.style.top=o[5]+"px",n.style.height=u+"px",n.style.transform="rotate("+i+"deg)",allLines.push(n)}function applyLines(){for(let e=0;e<allLines.length;e++){const t=allLines[e];document.getElementsByTagName("brain")[0].appendChild(t)}allLines=[]}function clearNeuron(e){const t=e.currentTarget,n=document.getElementsByTagName("brain")[0],o=document.getElementsByClassName(t.id);for(let e=o.length-1;e>=0;e--){const t=o[e];n.removeChild(t)}t.className=t.originalClassName}function changeNeuron(e){if(brain=document.getElementsByTagName("neuron"),currentNeuron=e.currentTarget,"neuron"!=currentNeuron.className){const e=document.getElementsByClassName("neuron");if(currentNeuron.className="neuron",e.length>0){for(let t=0;t<e.length;t++){const n=e[t];addLine(currentNeuron,n)}applyLines()}previousNeuron=currentNeuron,getNewQuote()}else clearNeuron(e),hideMessage()}function hideMessage(){document.getElementsByTagName("message")[0].className="",document.getElementsByTagName("attribute")[0].className=""}function getNewQuote(){let e=Quotes[getRandomInt(0,Quotes.length)];null!=currentNeuron&&null==currentNeuron.quote?currentNeuron.quote=e:e=new QuoteObject(currentNeuron.quote),document.getElementsByTagName("quote")[0].innerHTML=e.quote,document.getElementsByTagName("message")[0].className="";var t=document.getElementsByTagName("attribute")[0];t.innerHTML="- "+e.attribution,t.className="",window.setTimeout((function(){document.getElementsByTagName("message")[0].className="show",document.getElementsByTagName("attribute")[0].className="show"}),100)}function applyNeuronChange(){brain=document.getElementsByTagName("neuron");for(let e=0;e<brain.length;e++){let t=brain[e];t.className=t.newClassName}}function touchMove(e){trackTouch(e)}function touchStart(e){trackTouch(e)}function trackTouch(e){return tempX=e.touches[0].pageX,tempY=e.touches[0].pageY,tempX<0&&(tempX=0),tempY<0&&(tempY=0),touchDetected=!0}function pointerMove(e){return tempX=e.clientX,tempY=e.clientY,mouseDetected=!0}function keyUp(e){"escape"===e.key.toLowerCase()&&resetNeurons()}window.onresize=function(){clearTimeout(doit),doit=setTimeout(resetNeurons,100)},window.addEventListener("keyup",keyUp,!1),window.addEventListener("pointermove",pointerMove),window.onload=addNeurons;