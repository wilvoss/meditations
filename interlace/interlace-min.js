var xUnits,yUnits,selectedDot,query,widthChanger,r=document.querySelector(":root"),dots=[],allDots=[],allDotsThatWereSelected=[],controlIsDown=!1,eraser=!1,mouseIsDown=!1,reset=!1,roundedCorners=!1,multiplier=80;function init(){xUnits=window.innerWidth/multiplier-1,r.style.setProperty("--gap",xUnits+"px");for(var e=0;e<1320;e++){var t=document.createElement("dot");t.id="dot"+(e+1),t.title=t.id,e<1320&&(t.style.backgroundImage="url('images/"+t.id+".jpg')"),t.onpointerenter=function(){mouseIsDown&&(this.className=eraser?"":"selected")},t.onpointerleave=function(){},t.onpointerdown=function(){eraser="selected"==this.className,this.className="selected"==this.className?"":"selected"},dots.push(t)}applyDots(),window.setTimeout(loadQuery,200)}function applyDots(){for(let e=0;e<dots.length;e++){const t=dots[e];document.getElementsByTagName("dots")[0].appendChild(t)}}function roundDown(e){return Math.pow(10,Math.floor(Math.log10(e)))}function loadQuery(){""!==document.location.search&&decompressDots(document.location.search)}function resizeWindowWidth(e){multiplier>=80&&(multiplier/=e,xUnits=window.innerWidth/multiplier-1,r.style.setProperty("--gap",xUnits+"px"),document.getElementById("doubleButton").disabled=multiplier<=80)}function compressDots(){var e=0,t=0,o=0,n="";return getAllSelectedDots().forEach(((r,s,l)=>{t=o,(o=Number(r.id.replace("dot","")))==t+1&&s!==l.length-1||o==t||(n+=0!=t?t!=e?"+"+Number(t-e)+","+o:","+o:o,e=o)})),n}function decompressDots(e){if(""!=e){dotArrays=e.split("=")[1].split(",");var t=Math.round(-dotArrays[0].split("+")[0]/multiplier/2);t=window.innerHeight<window.innerWidth?(t+3)*multiplier/2:0,dotArrays.forEach((e=>{if(-1!=e.indexOf("+")){dotStart=Number(e.split("+")[0]),dotEnd=dotStart+Number(e.split("+")[1]);for(let e=dotStart;e<=dotEnd;e++)document.getElementById("dot"+Number(e+t)).className="selected"}else document.getElementById("dot"+(Number(e)+Number(t))).className="selected"}))}}function saveQuery(){allDotsThatWereSelected=getAllSelectedDots(),shareTransposition(query="?dots="+compressDots())}function shareTransposition(e){if(isNarrowScreen())document.location.href="sms:&body="+encodeURIComponent(document.location.origin+document.location.pathname+e);else{var t=document.createElement("textarea");t.value=document.location.origin+document.location.pathname+e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("A unique URL has been copied to the clipboard!")}}function resetDots(){reset||(allDotsThatWereSelected=getAllSelectedDots());for(let e=0;e<allDotsThatWereSelected.length;e++){allDotsThatWereSelected[e].className=reset?"selected":""}reset=!reset}function getAllSelectedDots(){allDots=document.getElementsByTagName("dot");var e=[];for(let t=0;t<allDots.length;t++){const o=allDots[t];"selected"==o.className&&e.push(o)}return e}function toggleRadius(){(roundedCorners=!roundedCorners)?r.style.setProperty("--borderRadius","50%"):r.style.setProperty("--borderRadius","0%")}var showInternalDot=!1;function keyDown(e){switch(e.key.toLowerCase()){case"escape":resetDots();break;case"control":controlIsDown=!0;break;case"alt":eraser=!0;break;case"r":toggleRadius();break;case"s":saveQuery();break;case"d":resizeWindowWidth(2);break;case"h":resizeWindowWidth(.5);break;default:break}}function keyUp(e){switch(e.key.toLowerCase()){case"control":controlIsDown=!1;break;case"alt":eraser=!1;break;default:break}}function pointerDown(e){reset=!1,allDotsThatWereSelected=[],mouseIsDown=!0}function pointerUp(e){mouseIsDown=!1}function touchMove(e){document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY).className=eraser?"":"selected"}function pointerMove(e){mouseIsDown&&(document.elementFromPoint(e.clientX,e.clientY).className=eraser?"":"selected")}window.onload=init,window.onkeydown=keyDown,window.onkeyup=keyUp,window.onpointermove=pointerMove,window.ontouchmove=touchMove,window.onpointerdown=pointerDown,window.onpointerup=pointerUp;