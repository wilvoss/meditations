let r=document.querySelector(":root");var control,input1,input2,input3,input4,currentLayer,layerProperties,mouseDetected,cycle=5e3,backgroundImageURL="url(../site/images/big_1.jpg",grids=["a","b","c","d"],imageCheckbox=document.getElementById("imageCheckbox"),query="?",tempX=0,tempY=0,baselineX=0,baselineY=0,isDragging=!1;function toggleBackgroundImage(e){setStyleVar("--image",e?backgroundImage:"none")}function selectLayer(e){for(let t=0;t<document.getElementsByTagName("control").length;t++){const n=document.getElementsByTagName("control")[t];e==n?(e.className=""==e.className?"selected":"",currentLayer="selected"==e.className?n:null):"radio"==n.getAttribute("type")&&(n.className="")}const t=document.getElementsByTagName("input");for(let e=0;e<t.length;e++){const n=t[e];"control"==n.parentElement.parentElement.tagName.toLowerCase()&&(n.tabIndex=currentLayer==n.parentElement.parentElement?0:-1)}}function updateSpecialValue(e,t,n=""){var a=!0,r=e.parentElement,o=r.children[0],l=o.children[0];if(-1!=t.toLowerCase().indexOf("deg"))setStyleVar(t,e.value+"deg"),setStyleVar(t.replace("Deg","")+"Opacity",-1==e.value?0:1);else switch(t){case"saturation":a=!1,setStyleVar("--blending",e.checked?"luminosity":"none"),l.innerHTML=e.checked?"true":"false";break;case"pattern":a=!1,grandparent=r.parentElement.id.toUpperCase(),setStyleVar("--pattern"+grandparent,e.checked?"var(--linear"+grandparent+")":"var(--radial"+grandparent+")"),l.innerHTML=e.checked?"linear":"radial";break;case"--image":a=!1,setStyleVar(t,e.checked?backgroundImageURL:"none"),l.innerHTML=e.checked?"visible":"hidden";break;default:setStyleVar(t,e.value+n);break}if(a&&o.children.length>0){l=o.children[0];"°"==n?-1==e.value?(l.innerHTML="OFF",r.setAttribute("value","off")):(l.innerHTML=e.value+n,r.setAttribute("value","on")):l.innerHTML=e.value+n}}function loadSettings(){if(-1!=location.href.indexOf("?"))if(4!=(layerProperties=location.href.split("?")[1].split("&")).length)location.href=location.href.domain;else for(let e=0;e<layerProperties.length;e++){const t=layerProperties[e].substr(0,1),n=layerProperties[e].substr(2).split(","),a=document.getElementById(t);input1=a.getElementsByTagName("input")[0],input1.value=n[0],updateSpecialValue(input1,"--"+t+"Deg","°"),input2=a.getElementsByTagName("input")[1],input2.value=n[1],updateSpecialValue(input2,"--"+t+"Gap","px"),input3=a.getElementsByTagName("input")[2],input3.value=n[2],updateSpecialValue(input3,"--"+t+"Weight","px"),input4=a.getElementsByTagName("input")[3],input4.checked=null==n[3]||"true"==n[3],updateSpecialValue(input4,"pattern")}}function GetMouseXY(e){return tempX=e.clientX,tempY=e.clientY,dragDegrees(),baselineY=tempY,baselineX=tempX,mouseDetected=!0}function beginDragging(e){e.stopPropagation(),baselineY=e.clientY,baselineX=e.clientX,isDragging=!0}function dragDegrees(){if(isDragging&&null!=currentLayer){const n=(tempX-baselineX)/5,a=(tempY-baselineY)/5,r=n*n>a*a?n:a,o="--"+currentLayer.id.replace("grid","")+"Deg";var e=currentLayer.getElementsByTagName("input")[0],t=Number(e.value)+Number(r);e.value=t,baselineY=tempY,baselineX=tempX,updateSpecialValue(e,o,"°")}}function stopDragging(e){e.stopPropagation(),isDragging=!1}function shareTransposition(){query="?";for(let e=0;e<4;e++)control=document.getElementById(grids[e]),input1Value=control.getElementsByTagName("input")[0].value,input2Value=control.getElementsByTagName("input")[1].value,input3Value=control.getElementsByTagName("input")[2].value,input4Checked=control.getElementsByTagName("input")[3].checked,query+=grids[e]+"="+input1Value+","+input2Value+","+input3Value+","+input4Checked+(e<3?"&":"");if("unknown"==getMobileOperatingSystem()){var e=document.createElement("textarea");e.value=document.location.origin+document.location.pathname+query,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),document.location.search=query,alert("A unique URL has been copied to the clipboard!")}else document.location.href="sms:&body="+encodeURIComponent(document.location.origin+document.location.pathname+query)}function onKeyUp(e){if("1"==e.key.toLowerCase()&&selectLayer(document.getElementById("a")),"2"==e.key.toLowerCase()&&selectLayer(document.getElementById("b")),"3"==e.key.toLowerCase()&&selectLayer(document.getElementById("c")),"4"==e.key.toLowerCase()&&selectLayer(document.getElementById("d")),"p"==e.key.toLowerCase()){const e=currentLayer.getElementsByTagName("input")[3];e.checked=!e.checked,updateSpecialValue(e,"pattern")}}window.addEventListener?window.addEventListener("keyup",onKeyUp):window.attachEvent("onkeyup",onKeyUp),window.onload=function(){loadSettings(),selectLayer(document.getElementsByTagName("control")[0]),document.getElementsByTagName("grids")[0].ondragstart=()=>!1},""===document.location.search&&(document.location.search="?a=135,5,4,true&b=134,5,1,true&c=136,5,1,true&d=137,5,1,true"),window.onpointermove=GetMouseXY,document.body.ondragstart=()=>!1;