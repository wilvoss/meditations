:root {
  --primaryHue: 260;
  --altHue: 160;
  --saturation: 66%;
  --luminosity: 28%;
  --darkestColor: hsl(var(--primaryHue) var(--saturation) 8%);
  --darkerColor: hsl(var(--primaryHue) var(--saturation) 2%);
  --backgroundColor: hsl(var(--primaryHue) var(--saturation) var(--luminosity));
  /* semi-transparent background color (modern syntax + legacy fallback) */
  --backgroundSemiTransparentColor: hsl(var(--primaryHue) var(--saturation) var(--luminosity) / 0.9);
  --backgroundSemiTransparentColor-fallback: hsla(var(--primaryHue), var(--saturation), var(--luminosity), 0.9);
  --mediumColor: hsl(var(--primaryHue) 66% 52%);
  --lighterColor: hsl(var(--primaryHue) 86% 78%);
  --lightestColor: hsl(var(--primaryHue) 90% 96%);
  --lightestTransparentColor: hsla(var(--primaryHue) 90% 96% .01);
  --mutedColor: hsl(var(--primaryHue) var(--saturation) 38%);
  --highlightColor: hsl(var(--altHue) 100% 68%);
  --codeColor: hsl(188 100% 50%);
  --weightBarWidth: 88px;
  --gap-vertical: 0px;
  --borderRadius: 8px;
}

/* Page layout */
html {
  margin: 0px;
  padding: 0px;
  width: 100%;
  height: 100%;
}

body {
  margin: 0;
  margin-right: auto;
  margin-left: auto;
  background-image: linear-gradient(transparent 20%, var(--darkerColor) 100%);
  background-color: var(--backgroundColor);
  padding: 20px;
  max-width: 1024px;
  height: 100%;
  overflow: hidden;
  color: var(--lightestColor);
  line-height: 1.5em;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

a,
a:active,
a:visited {
  border-bottom: 1px solid var(--highlightColor);
  color: var(--highlightColor);
  text-decoration: none;
}

a:hover,
a:focus {
  border-bottom-color: var(--highlightColor);
  color: var(--highlightColor);
}

h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 30px 0 8px 0;
  color: var(--lighterColor);
  font-weight: 600;
  line-height: 1.2em;
}

h3,
h4,
h5 {
  color: white;
}

h1 {
  font-size: 2.2em;
}

strong {
  color: var(--codeColor);
  font-weight: normal;
}

article {
  display: flex;
  flex-direction: row;
  gap: 20px;
  margin-top: 70px;
  border-radius: var(--borderRadius);
  height: calc(100vh - 140px - env(safe-area-inset-bottom));
}

article section {
  /* padding-bottom: 20px; */
  height: calc(100% - 0px);
  overflow: auto;
}

article section::-webkit-scrollbar {
  display: none;
  -ms-overflow-style: none;
  scroll-behavior: smooth;
  scrollbar-width: none;
  touch-action: auto;
}

article section img {
  display: block;
  margin-bottom: 20px;
  border-radius: var(--borderRadius);
  max-width: 100%;
  height: auto;
}

mobile-hidden {
  display: block;
}

mobile-visible {
  display: none;
}

details,
aside {
  border-radius: var(--borderRadius);
  background: var(--darkerColor);
  padding: 0px;
  width: 100%;
  max-width: 1024px;
  max-height: calc(100% - 20px);
  overflow: auto;
}

details::-webkit-scrollbar {
  display: none;
  -ms-overflow-style: none;
  scroll-behavior: smooth;
  scrollbar-width: none;
  touch-action: auto;
}

aside::-webkit-scrollbar {
  display: none;
  -ms-overflow-style: none;
  scroll-behavior: smooth;
  scrollbar-width: none;
  touch-action: auto;
}

details {
  position: fixed;
  top: 20px;
  z-index: 1000;
  box-shadow: 0px 8px 10px hsl(0 0% 0% / 0.2);
}

details summary {
  padding: 10px 20px;
}

details summary h2 {
  color: var(--mediumColor);
}

details p {
  padding: 0px 20px 10px 20px;
  color: var(--codeColor);
  font-family: monospace;
}

details summary p {
  display: inline;
  margin: 0px;
  padding: 0px;
}

details summary {
  display: block;
  position: relative;
  cursor: pointer;
  list-style: none;
}

details summary::after {
  position: absolute;
  top: 24px;
  right: 16px;
  transform: translate(-2px, calc(-50% - 0px)) rotate(90deg);
  transition: transform 0.18s ease, border-left-color 0.18s ease;
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
  border-left: 8px solid var(--codeColor);
  width: 0;
  height: 0;
  content: '';
}

details[open] summary::after {
  transform: translate(-2px, calc(-50% - 2px)) rotate(-90deg);
  border-left-color: var(--codeColor);
}

aside {
  margin-bottom: 20px;
  border-radius: var(--borderRadius);
  background-color: var(--lightestColor);
  width: 100%;
  height: 100%;
  color: black;
  font-size: 0.8em;
  line-height: 1.5em;
}

aside summary {
  padding: 10px 20px 0px 20px;
}

aside summary h2 {
  color: var(--mediumColor);
}

/* Table acts as layout only; rows are panels */
table {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
}

/* Each row is a grid panel so only the row border/outline appears on hover */
table tbody tr {
  display: grid;
  grid-template-columns: 50px 146px 1fr;
  align-items: center;
  gap: 0;
  margin: var(--gap-vertical) 0;
  overflow: hidden;
  text-align: left;
}

table tbody tr td {
  border: none;
  background: var(--lightestTransparentColor);
  padding: 8px 20px;
  white-space: normal;
  word-break: break-word;
}

table tbody tr td .weight-text {
  display: none;
}

table tbody tr:hover {
  cursor: pointer;
  background-color: hsl(var(--primaryHue) var(--saturation) 86%);
}

table tbody tr:hover {
  outline: 1px solid var(--lighterColor);
  outline-offset: 0px;
}

table tbody td:nth-child(1) {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  padding: 8px 10px 8px 24px;
  text-align: left;
}

table tbody td:nth-child(2) {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  padding-left: 0px;
}

/* include-toggle checkbox styling */
.include-toggle {
  margin-right: 8px;
  width: 18px;
  height: 18px;
  accent-color: hsl(var(--primaryHue) 80% 60%);
}

/* Toggle-all only visible when the data-collected details is open */
#data-collected summary #toggle-all-btn {
  display: none;
}

#data-collected[open] summary #toggle-all-btn {
  display: inline-block;
  cursor: pointer;
  margin-left: 8px;
  border: 1px solid hsl(var(--primaryHue) var(--saturation) 40%);
  border-radius: 6px;
  background: transparent;
  padding: 6px 8px;
}

/* Dim excluded rows to indicate they are not part of the fingerprint */
table tbody tr.excluded {
  opacity: 0.45;
  filter: grayscale(40%);
}

table tbody td:nth-child(2) {
  cursor: help;
  /* label column */
  color: var(--mutedColor);
}

/* Prevent long hex/code strings from overflowing on narrow screens */
details {
  word-break: break-word;
}

code {
  display: inline-block;
  vertical-align: middle;
  border-radius: 6px;
  background: transparent;
  padding: 2px 0px;
  max-width: 100%;
  color: var(--codeColor);
  white-space: normal;
  word-break: break-all;
  overflow-wrap: anywhere;
}

code#fingerprint-hash {
  color: var(--highlightColor);
}

footer {
  display: inline-flex;
  position: fixed;
  bottom: 0;
  /* left: 0; */
  justify-content: start;
  align-items: center;
  gap: .5em;
  /* background-color: var(--darkerColor); */
  padding: 10px 0px;
  width: calc(100% - 0px);
  height: 26px;
  color: var(--lighterColor);
  font-size: .8em;
}

mobile-hidden {
  display: inline;
}

mobile-visible {
  display: none;
}

/* end */
/* Modal styles for <modal> element */
modal {
  display: none;
  /* JS toggles display */
  position: fixed;
  z-index: 2000;
  inset: 0;
  font-family: inherit;
}

modal[aria-hidden="false"] {
  display: block;
}

modal .fingerprinting-modal-backdrop {
  position: absolute;
  backdrop-filter: blur(2px);
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
}

modal .fingerprinting-modal-panel {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
  border-radius: var(--borderRadius);
  background: var(--lightestColor);
  padding: 18px 18px 22px 18px;
  width: calc(100% - 40px);
  max-width: 820px;
  max-height: calc(100% - 80px);
  overflow: auto;
  color: black;
}

modal .fingerprinting-modal-title {
  margin: 0 0 8px 0;
  color: var(--mediumColor);
  font-size: 1.1rem;
}

modal .fingerprinting-modal-body {
  color: #222;
  font-size: 0.95rem;
  line-height: 1.4em;
}

modal .fingerprinting-modal-close {
  position: absolute;
  top: 8px;
  right: 10px;
  cursor: pointer;
  border: none;
  background: transparent;
  color: #333;
  font-size: 20px;
  line-height: 1;
}

@media (max-width: 1064px) {
  article {
    flex-direction: column;
    gap: 10px;
  }

  article section {
    height: auto;
    overflow: unset;
  }

  aside {
    min-height: calc(100% - 20px - env(safe-area-inset-bottom));
  }

  table thead tr,
  table tbody tr {
    grid-template-columns: 50px 146px 1fr;
    /* font-size: .9em; */
  }

  table tbody tr td {
    padding: 8px 10px;
  }

  mobile-hidden {
    display: none;
  }

  mobile-visible {
    display: inline;
  }

  aside {
    height: 100%;
    font-size: .9em;
  }

  details {
    max-width: calc(100% - 0px);
  }

  body>details {
    max-width: calc(100% - 40px);
  }

  article {
    margin-top: 90px;
    height: calc(100% - 160px - env(safe-area-inset-bottom));
    overflow: auto;
  }

  modal .fingerprinting-modal-panel {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 14px;
    width: calc(100% - 60px);
  }
}

/* Responsive: switch rows to vertical stacking on narrow screens */
@media (max-width: 720px) {
  article {
    margin-top: 120px;
    height: calc(100% - 190px - env(safe-area-inset-bottom));
    overflow: auto;
  }

  details {
    max-height: calc(100vh - 180px);
  }

  mobile-hidden {
    display: none;
  }

  mobile-visible {
    display: inline-block;
  }

  table thead {
    display: none;
  }

  body>details {
    max-width: calc(100% - 40px);
  }

  details {
    max-width: 100%;
  }

  table thead tr,
  table tbody tr {
    grid-template-columns: 50px 146px 1fr;
    /* font-size: .9em; */
  }

  table tbody tr td:nth-child(1),
  table thead tr th:nth-child(1) {
    display: block;
    color: var(--lightestColor);
    font-weight: 700;
  }

  table tbody tr td {
    padding: 8px 10px;
  }

  table tbody tr td .weight-text {
    display: none;
  }
}

@media (max-width: 480px) {
  article {
    margin-top: 120px;
    height: calc(100% - 190px - env(safe-area-inset-bottom));
    overflow: auto;
  }

  code {
    font-size: 1.2em;
    word-break: break-all;
  }
}

@media (max-width: 400px) {
  code {
    font-size: 1em;
    word-break: break-all;
  }
}